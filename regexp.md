# 正規表現

  - [正規表現とは](#正規表現とは)
  - [正規表現で使用する特殊文字](#正規表現で使用する特殊文字)
  - [メタ文字の解説](#メタ文字の解説)
  - [参考](#参考)
  - [tips](#tips)
  - [version](#version)

## 正規表現とは
<span style="color: red; ">**いくつかの文字列を一つの形式で表現するための表現方法です。**</span>

```
W(indows|INDOWS) ?9[85]
```

上記の表現で8個の文字列を表現できており、この表現を利用することで、たくさんの文章の中から見つけた文章を検索する事ができます。

## 正規表現で使用する特殊文字
正規表現ではいくつかのある文字に対して特別な意味を与えています。

```
.   ^   $   [   ]   *   +   ?   |   (   )
```

これらは全て半角で使用され、メタ文字と呼ばれます。

メタ文字そのものを検索したい場合は\でエスケープを行います。

```
\.  \^  \$  \[  \]  \*  \+  \?  \|  \(  \)
```

## メタ文字の解説

<span style="color: red; "></span>
### なんでもよい1文字 .
半角の .を使用すると、なんでもよい1文字を表現することができます。

| 正規表現 |私は.です |
|----|-----|
| 合致 | 私は鳥です 私は馬です 私は0です |

応用すると、

| 正規表現 |私は...が.. |
|----|-----|
| 合致 | 私はうどんが嫌い 私は早起きが苦手 |

.そのものを検索したい場合は、

| 正規表現 |test\.log |
|----|-----|
| 合致 | test.log |

### 行の先頭と最後 ^ $
行の先頭や最後にのみ存在する文字列を検索したい場合があります。

* 例1  今日はありがとうございました。 
* 例2  ありがとうと言いたい 
* 例3  君に心より

上記の例に対して、

| 正規表現 | ^ありがとう |
|----|-----|
| 合致 | 例2 |

^は行の先頭を意味します。

| 正規表現 | ありがとう$ |
|----|-----|
| 合致 | 例3 |

$は行の最後を意味します。

| 正規表現 | ^ありがとう$ |
|----|-----|
| 合致 | なし |

この場合はありがとうの文字だけのある行に合致します。

なお、行頭にある^、行末にある$を検索したい場合はそれぞれ、

^^ $$

となります。

これからもわかるように^, $は正規表現の先頭、終端のものしかメタ文字として認識されません。


### 同じ文字の繰り返し * + ?

同じ文字の繰り返しを表す正規表現は*,+,?の3つあります。

| 正規表現 | おー*い |
|----|-----|
| 合致 | おい おーーい おーーーい |

*は直前の文字がないか、直前の文字が1個以上連続するという意味になります。

ここで注意するのは、ファイル名を指定する時のワイルドカード使用される*とは意味が異なることです。

| 正規表現 | おー+い |
|----|-----|
| 合致 | おーい おーーい おーーーい |

+の場合は、*とは違い、最低でも1個は+の直前の文字がないといけません。

| 正規表現 | おー?い |
|----|-----|
| 合致 | おい おーい |

?の場合は、直前の文字が全くない科、1つだけあるという場合に使用します。

| 正規表現 | Windows? |
|----|-----|
| 合致 | Windows Window |

?は上記のような場合に便利です。

| 正規表現 | Windows ?98 |
|----|-----|
| 合致 | Windows98 Windows 98 |


### なんでもいい文字の連続 .*

| 正規表現 | 君が好き.*。 |
|----|-----|
| 合致 | 君が好きです。 君が好きかもね。 君が好きだっちゅうの。 |

いわばこれがワイルドカードで使用される*と同じ意味を持つ正規表現という事になります。

+, ?についても、それぞれ併用効果は違いますが、直前の文字が.という事でなんでもいい1文字という事になります。

* 例  楽しいかもね、そうかもね

| 正規表現 | 楽.*ね |
|----|-----|

合致するのは「楽しいかもね、そうかもね」までです。

つまり、.*は可能な限り合致するものまで繋がるのです。


### いずれかの文字列 |

| 正規表現 | IBM|マイクロソフト|Apple|ネットスケープ |
|----|-----|
| 合致 | IBM　マイクロソフト　Apple  ネットスケープ |

|で区切られた文字列のいずれかが存在したときに、正規表現に合致したことになります。


### 指定した文字のどれか []

* 例1　明日は晴です
* 例2　明日は曇です
* 例3　明日は雨です
* 例4　明日は雪です

これらの例に対して、

| 正規表現 | 明日は[晴曇雨]です |
|----|-----|

合致するのは例4以外となります。
[]でくくられた中の文字は、その中のどれか1つに合致するわけです。
これがもしも.を使用すると、

| 正規表現 | 明日は.です |
|----|-----|

全てが合致することになります。

| 正規表現 | A[A-Z]CCC |
|----|-----|
| 正規表現 | A[0-9]CCC |
| 正規表現 | A[A-Z0-9]CCC |

上記のような方法で、A~Zのどれか、0~9のどれかを表現できます。

また、

| 正規表現 | A[^A-Z]CCC |
|----|-----|

^を付けることでアルファベット以外を指定することもできます。
行頭を表す^とは意味が異なりますので注意してください。

| 正規表現 | た[か-こ]こ |
|----|-----|
| 合致 | たかこ  たきこ  たけこ |

上の例では、「たがこ」「たぎこ」にも合致します。
JIS漢字コードの並びに基づいていることにも注意します。

さらに注意点として、[]の中ではメタ文字は普通の文字として認識されるという点があります。（]と\は例外）

| 正規表現 | [.*] |
|----|-----|
| 合致 | .か*のいずれかの文字 |

| 正規表現 | [ABC^] |
|----|-----|
| 合致 | A, B, C, ^のいずれかの文字 |

^は文字として認識させたい場合は、必ず[]の中の2番目以降に記載すること。

先頭に書くと^に続く文字を否定する意味のメタ文字になってしまいます。


### グループ化 ()

今までのメタ文字は主に1文字を対象としてきました。しかし、まとめて数文字単位で処理できると便利な場合があります。
こんなときに便利なのが()です。()は中をグループ化してくれます。

| 正規表現 | が+ーん |
|----|-----|
| 合致 | ががーん　がががーん　ががががーん |

| 正規表現 | (じゃ)+ーん |
|----|-----|
| 合致 | じゃーん　じゃじゃーん　じゃじゃじゃーん |

| 正規表現 | 明日ぼく\|わたしは帰省します |
|----|-----|
| 合致 | 明日ぼく　わたしは帰省します |

| 正規表現 | 明日(ぼく|わたし)は帰宅します |
|----|-----|
| 合致 | 明日ぼくは帰宅します   明日わたしは帰宅します |

## 参考
[サルにもわかる正規表現入門](https://userweb.mnet.ne.jp/nakama/)
## tips
## version
